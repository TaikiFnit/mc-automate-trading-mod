# Villager Trading MOD テストガイド

## 基本動作テスト

### 1. 環境起動
```bash
./gradlew runClient
```

### 2. ワールド作成とセットアップ
1. 新しいワールドを作成（クリエイティブモード推奨）
2. 村人をスポーン: `/summon minecraft:villager ~ ~ ~`
3. 村人に職業を与える（職業ブロックを置く）

### 3. 自動取引テスト

#### テスト1: 基本的なアイテム投げ取引
```
/give @p minecraft:wheat 64
/give @p minecraft:iron_ingot 32
/give @p minecraft:emerald 10
```

1. 村人の取引内容を確認（右クリック）
2. 村人の近く（3ブロック以内）に取引可能なアイテムを投げる
3. 自動的に取引が実行されることを確認
4. 結果アイテムが出現することを確認

#### テスト2: エメラルド制限テスト
1. エメラルドを村人の近くに投げる
2. 取引が実行されない（安全機能）ことを確認
3. コンソールログを確認

#### テスト3: 設定変更テスト
```toml
# config/villagertrading-common.toml
[villager_trading]
enable_auto_trading = true
restrict_emerald_trades = false  # エメラルド取引を許可
trading_range = 5              # 範囲を5ブロックに拡大
trading_cooldown = 10          # クールダウンを0.5秒に短縮
debug_logging = true           # デバッグログを有効
```

### 4. 村人取引ステーションテスト

#### ステーションクラフト
```
レシピ: 
W E W
E   E  
W W W

W = オークの板
E = エメラルド
```

1. 村人取引ステーションをクラフト
2. 設置してGUIを開く（右クリック）
3. アイテムを投入してテスト

### 5. Create MOD連携テスト（Create MODがインストールされている場合）

1. Deployerを設置
2. 村人をDeployerの前に配置
3. Deployerにアイテムをセット
4. レッドストーン信号で自動取引をテスト

## デバッグ情報

### ログ確認
- デバッグログは `logs/latest.log` で確認
- `[villagertrading]` タグでフィルタリング

### 設定ファイル
- `.minecraft/config/villagertrading-common.toml`
- リアルタイムで設定変更可能

### コマンド
```
/reload  # 設定再読み込み（一部サーバー）
```

## 期待される動作

### ✅ 正常動作
- アイテムを投げると1秒後に自動取引実行
- 村人が「はい」の音を出す
- 取引結果アイテムが出現
- 村人の経験値が増加
- 取引制限が正しく適用される

### ❌ 制限事項
- エメラルド取引は初期設定でブロック
- 村人が寝ている時は取引しない
- 取引上限に達した取引は実行しない
- 複数アイテムが必要な取引はスキップ

## トラブルシューティング

### 取引が実行されない場合
1. 村人が職業を持っているか確認
2. 村人が起きているか確認
3. アイテムが取引リストにあるか確認
4. 取引上限に達していないか確認
5. デバッグログを確認

### 設定が反映されない場合
1. ファイルパスが正しいか確認
2. Minecraftを再起動
3. シングルプレイヤーでテスト

## パフォーマンステスト

### 大量村人テスト
1. 20体以上の村人を配置
2. 同時に大量のアイテムを投げる
3. ラグやクラッシュがないか確認

### 長時間動作テスト
1. 自動化システムを構築
2. 数時間連続動作させる
3. メモリリークがないか確認